## 加权随机算法和洗牌算法

### 加权随机算法

```python
# @Time : 2019/6/20 14:43 
# @Author : panky_pan
# @File : draw_manager.py 
# @Software: PyCharm
"""
算法阐明：
加权随机算法，将一个数域（例如0-1000）进行分域，对每块区域进行编号，将区域编号与事件object进行一一映射
每块区域占数域的比值代表这个区域的权重，即该区域所代表的object在某种情况下事件发生的概率。
利用Python的random.randint(),在该数域内随机产生一个数字，判断该数字属于
哪个区域，获得区域编号，即可获得区域代表的object
"""
import random


TEAM_DESC = {0: "OTHERS", 1: "PHX", 2: "NYK", 3: "BKN", 4: "CLE", 5: "LAL", 6: "NOP"}  # 数字编号代表的队伍


class DrawManager(object):

    def __init__(self):
        self.team_draw_probabilities = [100, 250, 200, 150, 100, 100, 100]  # 每支队伍被抽中的权重

    def weight_choice(self, weight):
        """根据权重比随机产生一个队伍代号"""
        t = random.randint(0, int(sum(weight))-1)
        for index, val in enumerate(weight):
            t -= val
            if t < 0:
                return index

    def get_random_team(self):
        """
        :return:
        """
        random_team_number = self.weight_choice(self.team_draw_probabilities)
        random_team = TEAM_DESC.get(random_team_number, None)
        return random_team_number, random_team


if __name__ == "__main__":
    draw = DrawManager()
    count_list = []
    for i in range(0, 1000):  # 抽取1000次
        team_number, team = draw.get_random_team()
        count_list.append(team_number)

    # 每支队伍被抽中的次数
    print("PHX: %s" % count_list.count(1))
    print("NYK: %s" % count_list.count(2))
    print("BKN: %s" % count_list.count(3))
    print("CLE: %s" % count_list.count(4))
    print("LAL: %s" % count_list.count(5))
    print("NOP: %s" % count_list.count(6))
    print("OTHERS: %s" % count_list.count(0))
```

</br>

### 洗牌算法

```python
# @Time : 2019/6/20 16:26 
# @Author : panky_pan
# @File : cards_shuffle.py 
# @Software: PyCharm
"""
算法阐明：
用一个有序数组（元素数量为54，元素类型为int，为了更好地适应计算机系统，使之符合16进制）
表示总牌数为54张的一副扑克牌。
洗一次牌的步骤如下：
    循环这个数组，将当前位置的元素和这个元素之后的所有元素之中随机产生的
    一个元素交换位置,即两个元素（两张牌）互换位置
为了达到更好的洗牌效果，总共洗7次牌
"""
from random import randint


class CardShuffle(object):

    def __init__(self):
        #  构造一副牌，用数字表示每一张牌，符合十六进制编码
        self.cards = [
            1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13,  # 黑桃1-K
            17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29,  # 红桃1-K
            33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45,  # 梅花1-K
            49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61,  # 方块1-K
            65, 66  # 大小王
        ]
        self.cards_count = len(self.cards)  # 牌的总数

    def shuffle_card(self):
        for i in range(0, 7):  # 洗7次牌
            for j in range(0, self.cards_count-1):  # 每一次洗牌的逻辑
                random_num = randint(j+1, self.cards_count-1)
                self.cards[j], self.cards[random_num] = self.cards[random_num], self.cards[j]  # 数组中两个不同位置的元素交换位置


if __name__ == "__main__":
    cards = CardShuffle()
    print(cards.cards)
    cards.shuffle_card()
    print(cards.cards)
```

